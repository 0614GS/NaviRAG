{"node_id": "2a1b9b35", "title": "Examples", "path": "pregel > LangGraph runtime > Examples", "content": "While most users will interact with Pregel through the [StateGraph](https://reference.langchain.com/python/langgraph/graphs/#langgraph.graph.state.StateGraph) API or the [`@entrypoint`](https://reference.langchain.com/python/langgraph/func/#langgraph.func.entrypoint) decorator, it is possible to interact with Pregel directly.\n\nBelow are a few different examples to give you a sense of the Pregel API.\n\n<Tabs>\n  <Tab title=\"Single node\">\n    ```python  theme={null}\n    from langgraph.channels import EphemeralValue\n    from langgraph.pregel import Pregel, NodeBuilder\n\n    node1 = (\n        NodeBuilder().subscribe_only(\"a\")\n        .do(lambda x: x + x)\n        .write_to(\"b\")\n    )\n\n    app = Pregel(\n        nodes={\"node1\": node1},\n        channels={\n            \"a\": EphemeralValue(str),\n            \"b\": EphemeralValue(str),\n        },\n        input_channels=[\"a\"],\n        output_channels=[\"b\"],\n    )\n\n    app.invoke({\"a\": \"foo\"})\n    ```\n\n    ```con  theme={null}\n    {'b': 'foofoo'}\n    ```\n  </Tab>\n\n  <Tab title=\"Multiple nodes\">\n    ```python  theme={null}\n    from langgraph.channels import LastValue, EphemeralValue\n    from langgraph.pregel import Pregel, NodeBuilder\n\n    node1 = (\n        NodeBuilder().subscribe_only(\"a\")\n        .do(lambda x: x + x)\n        .write_to(\"b\")\n    )\n\n    node2 = (\n        NodeBuilder().subscribe_only(\"b\")\n        .do(lambda x: x + x)\n        .write_to(\"c\")\n    )\n\n\n    app = Pregel(\n        nodes={\"node1\": node1, \"node2\": node2},\n        channels={\n            \"a\": EphemeralValue(str),\n            \"b\": LastValue(str),\n            \"c\": EphemeralValue(str),\n        },\n        input_channels=[\"a\"],\n        output_channels=[\"b\", \"c\"],\n    )\n\n    app.invoke({\"a\": \"foo\"})\n    ```\n\n    ```con  theme={null}\n    {'b': 'foofoo', 'c': 'foofoofoofoo'}\n    ```\n  </Tab>\n\n  <Tab title=\"Topic\">\n    ```python  theme={null}\n    from langgraph.channels import EphemeralValue, Topic\n    from langgraph.pregel import Pregel, NodeBuilder\n\n    node1 = (\n        NodeBuilder().subscribe_only(\"a\")\n        .do(lambda x: x + x)\n        .write_to(\"b\", \"c\")\n    )\n\n    node2 = (\n        NodeBuilder().subscribe_to(\"b\")\n        .do(lambda x: x[\"b\"] + x[\"b\"])\n        .write_to(\"c\")\n    )\n\n    app = Pregel(\n        nodes={\"node1\": node1, \"node2\": node2},\n        channels={\n            \"a\": EphemeralValue(str),\n            \"b\": EphemeralValue(str),\n            \"c\": Topic(str, accumulate=True),\n        },\n        input_channels=[\"a\"],\n        output_channels=[\"c\"],\n    )\n\n    app.invoke({\"a\": \"foo\"})\n    ```\n\n    ```pycon  theme={null}\n    {'c': ['foofoo', 'foofoofoofoo']}\n    ```\n  </Tab>\n\n  <Tab title=\"BinaryOperatorAggregate\">\n    This example demonstrates how to use the [`BinaryOperatorAggregate`](https://reference.langchain.com/python/langgraph/pregel/#langgraph.pregel.Pregel--advanced-channels-context-and-binaryoperatoraggregate) channel to implement a reducer.\n\n    ```python  theme={null}\n    from langgraph.channels import EphemeralValue, BinaryOperatorAggregate\n    from langgraph.pregel import Pregel, NodeBuilder\n\n\n    node1 = (\n        NodeBuilder().subscribe_only(\"a\")\n        .do(lambda x: x + x)\n        .write_to(\"b\", \"c\")\n    )\n\n    node2 = (\n        NodeBuilder().subscribe_only(\"b\")\n        .do(lambda x: x + x)\n        .write_to(\"c\")\n    )\n\n    def reducer(current, update):\n        if current:\n            return current + \" | \" + update\n        else:\n            return update\n\n    app = Pregel(\n        nodes={\"node1\": node1, \"node2\": node2},\n        channels={\n            \"a\": EphemeralValue(str),\n            \"b\": EphemeralValue(str),\n            \"c\": BinaryOperatorAggregate(str, operator=reducer),\n        },\n        input_channels=[\"a\"],\n        output_channels=[\"c\"],\n    )\n\n    app.invoke({\"a\": \"foo\"})\n    ```\n  </Tab>\n\n  <Tab title=\"Cycle\">\n    This example demonstrates how to introduce a cycle in the graph, by having\n    a chain write to a channel it subscribes to. Execution will continue\n    until a `None` value is written to the channel.\n\n    ```python  theme={null}\n    from langgraph.channels import EphemeralValue\n    from langgraph.pregel import Pregel, NodeBuilder, ChannelWriteEntry\n\n    example_node = (\n        NodeBuilder().subscribe_only(\"value\")\n        .do(lambda x: x + x if len(x) < 10 else None)\n        .write_to(ChannelWriteEntry(\"value\", skip_none=True))\n    )\n\n    app = Pregel(\n        nodes={\"example_node\": example_node},\n        channels={\n            \"value\": EphemeralValue(str),\n        },\n        input_channels=[\"value\"],\n        output_channels=[\"value\"],\n    )\n\n    app.invoke({\"value\": \"a\"})\n    ```\n\n    ```pycon  theme={null}\n    {'value': 'aaaaaaaaaaaaaaaa'}\n    ```\n  </Tab>\n</Tabs>", "summary": "Examples of directly using the Pregel API to build and execute computational graphs with different node configurations and channel types.", "keywords": ["Pregel", "NodeBuilder", "EphemeralValue", "Topic", "BinaryOperatorAggregate", "LastValue", "ChannelWriteEntry", "input_channels", "output_channels", "invoke"]}