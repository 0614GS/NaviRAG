{"node_id": "f5604eda", "title": "Validating human input", "path": "interrupts > Interrupts > Common patterns > Validating human input", "content": "Sometimes you need to validate input from humans and ask again if it's invalid. You can do this using multiple [`interrupt`](https://reference.langchain.com/python/langgraph/types/#langgraph.types.interrupt) calls in a loop.\n\n```python  theme={null}\nfrom langgraph.types import interrupt\n\ndef get_age_node(state: State):\n    prompt = \"What is your age?\"\n\n    while True:\n        answer = interrupt(prompt)  # payload surfaces in result[\"__interrupt__\"]\n\n        # Validate the input\n        if isinstance(answer, int) and answer > 0:\n            # Valid input - continue\n            break\n        else:\n            # Invalid input - ask again with a more specific prompt\n            prompt = f\"'{answer}' is not a valid age. Please enter a positive number.\"\n\n    return {\"age\": answer}\n```\n\nEach time you resume the graph with invalid input, it will ask again with a clearer message. Once valid input is provided, the node completes and the graph continues.\n\n<Accordion title=\"Full example\">\n  ```python  theme={null}\n  import sqlite3\n  from typing import TypedDict\n\n  from langgraph.checkpoint.sqlite import SqliteSaver\n  from langgraph.graph import StateGraph, START, END\n  from langgraph.types import Command, interrupt\n\n\n  class FormState(TypedDict):\n      age: int | None\n\n\n  def get_age_node(state: FormState):\n      prompt = \"What is your age?\"\n\n      while True:\n          answer = interrupt(prompt)  # payload surfaces in result[\"__interrupt__\"]\n\n          if isinstance(answer, int) and answer > 0:\n              return {\"age\": answer}\n\n          prompt = f\"'{answer}' is not a valid age. Please enter a positive number.\"\n\n\n  builder = StateGraph(FormState)\n  builder.add_node(\"collect_age\", get_age_node)\n  builder.add_edge(START, \"collect_age\")\n  builder.add_edge(\"collect_age\", END)\n\n  checkpointer = SqliteSaver(sqlite3.connect(\"forms.db\"))\n  graph = builder.compile(checkpointer=checkpointer)\n\n  config = {\"configurable\": {\"thread_id\": \"form-1\"}}\n  first = graph.invoke({\"age\": None}, config=config)\n  print(first[\"__interrupt__\"])  # -> [Interrupt(value='What is your age?', ...)]\n\n  # Provide invalid data; the node re-prompts\n  retry = graph.invoke(Command(resume=\"thirty\"), config=config)\n  print(retry[\"__interrupt__\"])  # -> [Interrupt(value=\"'thirty' is not a valid age...\", ...)]\n\n  # Provide valid data; loop exits and state updates\n  final = graph.invoke(Command(resume=30), config=config)\n  print(final[\"age\"])  # -> 30\n  ```\n</Accordion>", "summary": "Demonstrates using interrupt calls in a loop to validate human input, such as age, within a LangGraph application.", "keywords": ["interrupt", "StateGraph", "SqliteSaver", "Command", "validate", "loop", "resume", "checkpointer", "node", "graph.invoke"]}