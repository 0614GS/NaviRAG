{"node_id": "24b822e4", "title": "Pass private state between nodes", "path": "use-graph-api > Use the graph API > Define and update state > Pass private state between nodes", "content": "In some cases, you may want nodes to exchange information that is crucial for intermediate logic but doesn't need to be part of the main schema of the graph. This private data is not relevant to the overall input/output of the graph and should only be shared between certain nodes.\n\nBelow, we'll create an example sequential graph consisting of three nodes (node\\_1, node\\_2 and node\\_3), where private data is passed between the first two steps (node\\_1 and node\\_2), while the third step (node\\_3) only has access to the public overall state.\n\n```python  theme={null}\nfrom langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n\n# The overall state of the graph (this is the public state shared across nodes)\nclass OverallState(TypedDict):\n    a: str\n\n# Output from node_1 contains private data that is not part of the overall state\nclass Node1Output(TypedDict):\n    private_data: str\n\n# The private data is only shared between node_1 and node_2\ndef node_1(state: OverallState) -> Node1Output:\n    output = {\"private_data\": \"set by node_1\"}\n    print(f\"Entered node `node_1`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# Node 2 input only requests the private data available after node_1\nclass Node2Input(TypedDict):\n    private_data: str\n\ndef node_2(state: Node2Input) -> OverallState:\n    output = {\"a\": \"set by node_2\"}\n    print(f\"Entered node `node_2`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# Node 3 only has access to the overall state (no access to private data from node_1)\ndef node_3(state: OverallState) -> OverallState:\n    output = {\"a\": \"set by node_3\"}\n    print(f\"Entered node `node_3`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# Connect nodes in a sequence\n# node_2 accepts private data from node_1, whereas\n# node_3 does not see the private data.\nbuilder = StateGraph(OverallState).add_sequence([node_1, node_2, node_3])\nbuilder.add_edge(START, \"node_1\")\ngraph = builder.compile()\n\n# Invoke the graph with the initial state\nresponse = graph.invoke(\n    {\n        \"a\": \"set at start\",\n    }\n)\n\nprint()\nprint(f\"Output of graph invocation: {response}\")\n```\n\n```\nEntered node `node_1`:\n    Input: {'a': 'set at start'}.\n    Returned: {'private_data': 'set by node_1'}\nEntered node `node_2`:\n    Input: {'private_data': 'set by node_1'}.\n    Returned: {'a': 'set by node_2'}\nEntered node `node_3`:\n    Input: {'a': 'set by node_2'}.\n    Returned: {'a': 'set by node_3'}\n\nOutput of graph invocation: {'a': 'set by node_3'}\n```", "summary": "Demonstrates how to pass private state between specific nodes in a LangGraph sequential graph, using separate TypedDict classes to manage intermediate data not part of the overall public schema.", "keywords": ["StateGraph", "TypedDict", "private state", "OverallState", "add_sequence", "node", "graph.invoke", "sequential graph", "public state", "intermediate logic"]}