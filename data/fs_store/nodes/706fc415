{"node_id": "706fc415", "title": "Step 5: Wire it together", "path": "thinking-in-langgraph > Thinking in LangGraph > Step 5: Wire it together", "content": "Now we connect our nodes into a working graph. Since our nodes handle their own routing decisions, we only need a few essential edges.\n\nTo enable [human-in-the-loop](/oss/python/langgraph/interrupts) with `interrupt()`, we need to compile with a [checkpointer](/oss/python/langgraph/persistence) to save state between runs:\n\n<Accordion title=\"Graph compilation code\" icon=\"diagram-project\" defaultOpen={true}>\n  ```python  theme={null}\n  from langgraph.checkpoint.memory import MemorySaver\n  from langgraph.types import RetryPolicy\n\n  # Create the graph\n  workflow = StateGraph(EmailAgentState)\n\n  # Add nodes with appropriate error handling\n  workflow.add_node(\"read_email\", read_email)\n  workflow.add_node(\"classify_intent\", classify_intent)\n\n  # Add retry policy for nodes that might have transient failures\n  workflow.add_node(\n      \"search_documentation\",\n      search_documentation,\n      retry_policy=RetryPolicy(max_attempts=3)\n  )\n  workflow.add_node(\"bug_tracking\", bug_tracking)\n  workflow.add_node(\"draft_response\", draft_response)\n  workflow.add_node(\"human_review\", human_review)\n  workflow.add_node(\"send_reply\", send_reply)\n\n  # Add only the essential edges\n  workflow.add_edge(START, \"read_email\")\n  workflow.add_edge(\"read_email\", \"classify_intent\")\n  workflow.add_edge(\"send_reply\", END)\n\n  # Compile with checkpointer for persistence, in case run graph with Local_Server --> Please compile without checkpointer\n  memory = MemorySaver()\n  app = workflow.compile(checkpointer=memory)\n  ```\n</Accordion>\n\nThe graph structure is minimal because routing happens inside nodes through [`Command`](https://reference.langchain.com/python/langgraph/types/#langgraph.types.Command) objects. Each node declares where it can go using type hints like `Command[Literal[\"node1\", \"node2\"]]`, making the flow explicit and traceable.", "summary": "Connects nodes into a LangGraph workflow with error handling and checkpointer for human-in-the-loop interrupts, enabling state persistence.", "keywords": ["StateGraph", "MemorySaver", "RetryPolicy", "checkpointer", "interrupt", "Command", "workflow.compile", "human_review", "edges", "nodes"]}