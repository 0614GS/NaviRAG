{"node_id": "97e01819", "title": "Interrupts in tools", "path": "interrupts > Interrupts > Common patterns > Interrupts in tools", "content": "You can also place interrupts directly inside tool functions. This makes the tool itself pause for approval whenever it's called, and allows for human review and editing of the tool call before it is executed.\n\nFirst, define a tool that uses [`interrupt`](https://reference.langchain.com/python/langgraph/types/#langgraph.types.interrupt):\n\n```python  theme={null}\nfrom langchain.tools import tool\nfrom langgraph.types import interrupt\n\n@tool\ndef send_email(to: str, subject: str, body: str):\n    \"\"\"Send an email to a recipient.\"\"\"\n\n    # Pause before sending; payload surfaces in result[\"__interrupt__\"]\n    response = interrupt({\n        \"action\": \"send_email\",\n        \"to\": to,\n        \"subject\": subject,\n        \"body\": body,\n        \"message\": \"Approve sending this email?\"\n    })\n\n    if response.get(\"action\") == \"approve\":\n        # Resume value can override inputs before executing\n        final_to = response.get(\"to\", to)\n        final_subject = response.get(\"subject\", subject)\n        final_body = response.get(\"body\", body)\n        return f\"Email sent to {final_to} with subject '{final_subject}'\"\n    return \"Email cancelled by user\"\n```\n\nThis approach is useful when you want the approval logic to live with the tool itself, making it reusable across different parts of your graph. The LLM can call the tool naturally, and the interrupt will pause execution whenever the tool is invoked, allowing you to approve, edit, or cancel the action.\n\n<Accordion title=\"Full example\">\n  ```python  theme={null}\n  import sqlite3\n  from typing import TypedDict\n\n  from langchain.tools import tool\n  from langchain_anthropic import ChatAnthropic\n  from langgraph.checkpoint.sqlite import SqliteSaver\n  from langgraph.graph import StateGraph, START, END\n  from langgraph.types import Command, interrupt\n\n\n  class AgentState(TypedDict):\n      messages: list[dict]\n\n\n  @tool\n  def send_email(to: str, subject: str, body: str):\n      \"\"\"Send an email to a recipient.\"\"\"\n\n      # Pause before sending; payload surfaces in result[\"__interrupt__\"]\n      response = interrupt({\n          \"action\": \"send_email\",\n          \"to\": to,\n          \"subject\": subject,\n          \"body\": body,\n          \"message\": \"Approve sending this email?\",\n      })\n\n      if response.get(\"action\") == \"approve\":\n          final_to = response.get(\"to\", to)\n          final_subject = response.get(\"subject\", subject)\n          final_body = response.get(\"body\", body)\n\n          # Actually send the email (your implementation here)\n          print(f\"[send_email] to={final_to} subject={final_subject} body={final_body}\")\n          return f\"Email sent to {final_to}\"\n\n      return \"Email cancelled by user\"\n\n\n  model = ChatAnthropic(model=\"claude-sonnet-4-5-20250929\").bind_tools([send_email])\n\n\n  def agent_node(state: AgentState):\n      # LLM may decide to call the tool; interrupt pauses before sending\n      result = model.invoke(state[\"messages\"])\n      return {\"messages\": state[\"messages\"] + [result]}\n\n\n  builder = StateGraph(AgentState)\n  builder.add_node(\"agent\", agent_node)\n  builder.add_edge(START, \"agent\")\n  builder.add_edge(\"agent\", END)\n\n  checkpointer = SqliteSaver(sqlite3.connect(\"tool-approval.db\"))\n  graph = builder.compile(checkpointer=checkpointer)\n\n  config = {\"configurable\": {\"thread_id\": \"email-workflow\"}}\n  initial = graph.invoke(\n      {\n          \"messages\": [\n              {\"role\": \"user\", \"content\": \"Send an email to alice@example.com about the meeting\"}\n          ]\n      },\n      config=config,\n  )\n  print(initial[\"__interrupt__\"])  # -> [Interrupt(value={'action': 'send_email', ...})]\n\n  # Resume with approval and optionally edited arguments\n  resumed = graph.invoke(\n      Command(resume={\"action\": \"approve\", \"subject\": \"Updated subject\"}),\n      config=config,\n  )\n  print(resumed[\"messages\"][-1])  # -> Tool result returned by send_email\n  ```\n</Accordion>", "summary": "Explains how to embed interrupts within tool functions to pause execution for human approval, editing, or cancellation before the tool executes, using a send_email example.", "keywords": ["interrupt", "tool", "send_email", "approval", "pause", "resume", "human review", "LangGraph", "Command", "SqliteSaver"]}