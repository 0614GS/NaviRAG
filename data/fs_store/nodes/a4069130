{"node_id": "a4069130", "title": "Process state updates with reducers", "path": "use-graph-api > Use the graph API > Define and update state > Process state updates with reducers", "content": "Each key in the state can have its own independent [reducer](/oss/python/langgraph/graph-api#reducers) function, which controls how updates from nodes are applied. If no reducer function is explicitly specified then it is assumed that all updates to the key should override it.\n\nFor `TypedDict` state schemas, we can define reducers by annotating the corresponding field of the state with a reducer function.\n\nIn the earlier example, our node updated the `\"messages\"` key in the state by appending a message to it. Below, we add a reducer to this key, such that updates are automatically appended:\n\n```python  theme={null}\nfrom typing_extensions import Annotated\n\ndef add(left, right):\n    \"\"\"Can also import `add` from the `operator` built-in.\"\"\"\n    return left + right\n\nclass State(TypedDict):\n    messages: Annotated[list[AnyMessage], add]  # [!code highlight]\n    extra_field: int\n```\n\nNow our node can be simplified:\n\n```python  theme={null}\ndef node(state: State):\n    new_message = AIMessage(\"Hello!\")\n    return {\"messages\": [new_message], \"extra_field\": 10}  # [!code highlight]\n```\n\n```python  theme={null}\nfrom langgraph.graph import START\n\ngraph = StateGraph(State).add_node(node).add_edge(START, \"node\").compile()\n\nresult = graph.invoke({\"messages\": [HumanMessage(\"Hi\")]})\n\nfor message in result[\"messages\"]:\n    message.pretty_print()\n```\n\n```\n================================ Human Message ================================\n\nHi\n================================== Ai Message ==================================\n\nHello!\n```", "summary": "Explains how to use reducer functions to manage state updates in LangGraph, including built-in MessagesState for chat applications.", "keywords": ["reducer", "TypedDict", "Annotated", "StateGraph", "MessagesState", "add_messages", "AnyMessage", "AIMessage", "HumanMessage", "state updates"]}