{"node_id": "c82e4ca7", "title": "Creating workers in LangGraph", "path": "workflows-agents > Workflows and agents > Orchestrator-worker > Creating workers in LangGraph", "content": "Orchestrator-worker workflows are common and LangGraph has built-in support for them. The `Send` API lets you dynamically create worker nodes and send them specific inputs. Each worker has its own state, and all worker outputs are written to a shared state key that is accessible to the orchestrator graph. This gives the orchestrator access to all worker output and allows it to synthesize them into a final output. The example below iterates over a list of sections and uses the `Send` API to send a section to each worker.\n\n```python  theme={null}\nfrom langgraph.types import Send\n\n\n# Graph state\nclass State(TypedDict):\n    topic: str  # Report topic\n    sections: list[Section]  # List of report sections\n    completed_sections: Annotated[\n        list, operator.add\n    ]  # All workers write to this key in parallel\n    final_report: str  # Final report\n\n\n# Worker state\nclass WorkerState(TypedDict):\n    section: Section\n    completed_sections: Annotated[list, operator.add]\n\n\n# Nodes\ndef orchestrator(state: State):\n    \"\"\"Orchestrator that generates a plan for the report\"\"\"\n\n    # Generate queries\n    report_sections = planner.invoke(\n        [\n            SystemMessage(content=\"Generate a plan for the report.\"),\n            HumanMessage(content=f\"Here is the report topic: {state['topic']}\"),\n        ]\n    )\n\n    return {\"sections\": report_sections.sections}\n\n\ndef llm_call(state: WorkerState):\n    \"\"\"Worker writes a section of the report\"\"\"\n\n    # Generate section\n    section = llm.invoke(\n        [\n            SystemMessage(\n                content=\"Write a report section following the provided name and description. Include no preamble for each section. Use markdown formatting.\"\n            ),\n            HumanMessage(\n                content=f\"Here is the section name: {state['section'].name} and description: {state['section'].description}\"\n            ),\n        ]\n    )\n\n    # Write the updated section to completed sections\n    return {\"completed_sections\": [section.content]}\n\n\ndef synthesizer(state: State):\n    \"\"\"Synthesize full report from sections\"\"\"\n\n    # List of completed sections\n    completed_sections = state[\"completed_sections\"]\n\n    # Format completed section to str to use as context for final sections\n    completed_report_sections = \"\\n\\n---\\n\\n\".join(completed_sections)\n\n    return {\"final_report\": completed_report_sections}\n\n\n# Conditional edge function to create llm_call workers that each write a section of the report\ndef assign_workers(state: State):\n    \"\"\"Assign a worker to each section in the plan\"\"\"\n\n    # Kick off section writing in parallel via Send() API\n    return [Send(\"llm_call\", {\"section\": s}) for s in state[\"sections\"]]\n\n\n# Build workflow\norchestrator_worker_builder = StateGraph(State)\n\n# Add the nodes\norchestrator_worker_builder.add_node(\"orchestrator\", orchestrator)\norchestrator_worker_builder.add_node(\"llm_call\", llm_call)\norchestrator_worker_builder.add_node(\"synthesizer\", synthesizer)\n\n# Add edges to connect nodes\norchestrator_worker_builder.add_edge(START, \"orchestrator\")\norchestrator_worker_builder.add_conditional_edges(\n    \"orchestrator\", assign_workers, [\"llm_call\"]\n)\norchestrator_worker_builder.add_edge(\"llm_call\", \"synthesizer\")\norchestrator_worker_builder.add_edge(\"synthesizer\", END)\n\n# Compile the workflow\norchestrator_worker = orchestrator_worker_builder.compile()\n\n# Show the workflow\ndisplay(Image(orchestrator_worker.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = orchestrator_worker.invoke({\"topic\": \"Create a report on LLM scaling laws\"})\n\nfrom IPython.display import Markdown\nMarkdown(state[\"final_report\"])\n```", "summary": "Explains how to create worker nodes in LangGraph using the Send API for orchestrator-worker workflows, with a code example for parallel report section generation.", "keywords": ["LangGraph", "Send API", "orchestrator-worker", "StateGraph", "TypedDict", "conditional edges", "parallel workers", "llm_call", "synthesizer", "State"]}