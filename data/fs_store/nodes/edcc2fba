{"node_id": "edcc2fba", "title": "Stream custom data", "path": "streaming > Streaming > Stream custom data", "content": "To send **custom user-defined data** from inside a LangGraph node or tool, follow these steps:\n\n1. Use [`get_stream_writer`](https://reference.langchain.com/python/langgraph/config/#langgraph.config.get_stream_writer) to access the stream writer and emit custom data.\n2. Set `stream_mode=\"custom\"` when calling `.stream()` or `.astream()` to get the custom data in the stream. You can combine multiple modes (e.g., `[\"updates\", \"custom\"]`), but at least one must be `\"custom\"`.\n\n<Warning>\n  **No [`get_stream_writer`](https://reference.langchain.com/python/langgraph/config/#langgraph.config.get_stream_writer) in async for Python \\< 3.11**\n  In async code running on Python \\< 3.11, [`get_stream_writer`](https://reference.langchain.com/python/langgraph/config/#langgraph.config.get_stream_writer) will not work.\n  Instead, add a `writer` parameter to your node or tool and pass it manually.\n  See [Async with Python \\< 3.11](#async) for usage examples.\n</Warning>\n\n<Tabs>\n  <Tab title=\"node\">\n    ```python  theme={null}\n    from typing import TypedDict\n    from langgraph.config import get_stream_writer\n    from langgraph.graph import StateGraph, START\n\n    class State(TypedDict):\n        query: str\n        answer: str\n\n    def node(state: State):\n        # Get the stream writer to send custom data\n        writer = get_stream_writer()\n        # Emit a custom key-value pair (e.g., progress update)\n        writer({\"custom_key\": \"Generating custom data inside node\"})\n        return {\"answer\": \"some data\"}\n\n    graph = (\n        StateGraph(State)\n        .add_node(node)\n        .add_edge(START, \"node\")\n        .compile()\n    )\n\n    inputs = {\"query\": \"example\"}\n\n    # Set stream_mode=\"custom\" to receive the custom data in the stream\n    for chunk in graph.stream(inputs, stream_mode=\"custom\"):\n        print(chunk)\n    ```\n  </Tab>\n\n  <Tab title=\"tool\">\n    ```python  theme={null}\n    from langchain.tools import tool\n    from langgraph.config import get_stream_writer\n\n    @tool\n    def query_database(query: str) -> str:\n        \"\"\"Query the database.\"\"\"\n        # Access the stream writer to send custom data\n        writer = get_stream_writer()  # [!code highlight]\n        # Emit a custom key-value pair (e.g., progress update)\n        writer({\"data\": \"Retrieved 0/100 records\", \"type\": \"progress\"})  # [!code highlight]\n        # perform query\n        # Emit another custom key-value pair\n        writer({\"data\": \"Retrieved 100/100 records\", \"type\": \"progress\"})\n        return \"some-answer\"\n\n\n    graph = ... # define a graph that uses this tool\n\n    # Set stream_mode=\"custom\" to receive the custom data in the stream\n    for chunk in graph.stream(inputs, stream_mode=\"custom\"):\n        print(chunk)\n    ```\n  </Tab>\n</Tabs>", "summary": "Explains how to stream custom user-defined data from LangGraph nodes or tools using get_stream_writer and stream_mode='custom'.", "keywords": ["get_stream_writer", "stream_mode", "custom", "node", "tool", "stream", "LangGraph", "StateGraph", "async", "writer"]}